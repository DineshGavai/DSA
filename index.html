<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSA Code Viewer</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 5px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>DSA Repository Code Viewer</h1>
    <select id="folder-selector">
        <option value="">Select a question</option>
    </select>
    <select id="file-selector" disabled>
        <option value="">Select a file</option>
    </select>
    <pre id="code-display">Select a file to view its content.</pre>

    <script>
        const repo = "DineshGavai/DSA"; // Your GitHub repository
        const branch = "main"; // Change if needed

        async function fetchRepoFolders() {
            const apiUrl = `https://api.github.com/repos/${repo}/contents/`;
            const response = await fetch(apiUrl);
            const files = await response.json();
            const folderSelector = document.getElementById("folder-selector");

            files.forEach(file => {
                if (file.type === "dir") { // Only list folders
                    let option = document.createElement("option");
                    option.value = file.path;
                    option.textContent = file.name;
                    folderSelector.appendChild(option);
                }
            });

            folderSelector.addEventListener("change", function() {
                if (this.value) {
                    fetchFolderFiles(this.value);
                    document.getElementById("file-selector").disabled = false;
                }
            });
        }

        async function fetchFolderFiles(folderPath) {
            const apiUrl = `https://api.github.com/repos/${repo}/contents/${folderPath}`;
            const response = await fetch(apiUrl);
            const files = await response.json();
            const fileSelector = document.getElementById("file-selector");
            fileSelector.innerHTML = '<option value="">Select a file</option>'; // Reset file options

            files.forEach(file => {
                if (file.type === "file") { // Only list files inside the folder
                    let option = document.createElement("option");
                    option.value = file.path;
                    option.textContent = file.name;
                    fileSelector.appendChild(option);
                }
            });

            fileSelector.addEventListener("change", function() {
                if (this.value) {
                    fetchFileContent(this.value);
                }
            });
        }

        async function fetchFileContent(filePath) {
            const rawUrl = `https://raw.githubusercontent.com/DineshGavai/DSA/main/${filePath}`;
            const response = await fetch(rawUrl);
            const code = await response.text();
            document.getElementById("code-display").textContent = code;
        }

        fetchRepoFolders();
    </script>
</body>
</html>
